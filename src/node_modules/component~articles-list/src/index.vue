<style lang="less">
  @import (reference) "src/styles/global";
</style>

<template>
  <table>
    <tbody>
      <tr v-for="article in articles | filterBy filterQuery | numberOfFilteredArticles in 'Title'"
          track-by="ArticleId">
        <td>
          <app-article :article="article"></app-article>
        </td>
      </tr>
    </tbody>

    <p v-if="!hasArticles">Sorry, no articles found for {{ filterQuery }}.</p>
  </table>
</template>

<script>
  const article = require('component~article')

  module.exports = {
    components: {
      'app-article': article
    },

    data: function () {
      return {
        hasArticles: 0
      }
    },

    filters: {
      numberOfFilteredArticles: function (articles) {
        // http://forum.vuejs.org/topic/3506/count-items-in-filtered-table/4
        this.$set('hasArticles', articles.length)
        return articles
      }
    },

    props: {
      articles: Array,
      filterQuery: String
    }
  }
</script>
